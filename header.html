<div id="loadingProcess"></div>
<script type="text/javascript" src="https://magi.com/assets/thirdparty/leader-line.min.js"></script>

<script type="text/javascript">
    "use strict";

    !function () {
        function a() {//生成目录
            var t, a, e, n = $("#cnblogs_post_body>h2");
            if (0 < n.length) {
                var i = [].join.call(n.map(function (t, a) {
                    return '<li><a id="catalog' + a.id + '" title="' + a.innerText + '" href="#' + a.id + '">' + a.innerText + "</a></li>";
                }), "");
                $("body").append('<div id="reader_catalog"><h3 style="cursor:pointer" onclick="$(' + "'body,html'" + ').scrollTop(0);">目录</h3><ul>' + i + "</ul></div>");
            }
            t = n, a = {}, e = {
                color: "#5bf",
                endPlug: "disc",
                size: 2,
                startSocket: "left",
                endSocket: "right",
                hide: !0
            }, [].slice.call(t).forEach(function (t) {
                var n = LeaderLine.mouseHoverAnchor(document.getElementById("catalog" + t.id), "draw", {
                    animOptions: {
                        duration: 500
                    },
                    hoverStyle: {
                        backgroundColor: null
                    },
                    style: {
                        paddingTop: null,
                        paddingRight: null,
                        paddingBottom: null,
                        paddingLeft: null,
                        cursor: null,
                        backgroundColor: null,
                        backgroundImage: null,
                        backgroundSize: null,
                        backgroundPosition: null,
                        backgroundRepeat: null
                    },
                    onSwitch: function (e) {
                        var n = a[t.id];
                        "mouseenter" == e.type && n.position();
                    }
                });
                a[t.id] = new LeaderLine(n, document.getElementById(t.id), e);
            }), $(window).scroll(function () {
                for (var t in a) a[t].position();
            });
        }
        function e() {
            var t = $("#post_detail .postTitle")[0];
            if (t) {
                var a = $("#post-date").text(), n = $("#post_view_count").text(), i = $("#post_comment_count").text();
                if ("..." === n || "..." === i) return void setTimeout(e, 500);
                t.after($('<div class="reader-post-info">' + a + '<span title="阅读数"><svg viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="30014" width="20" height="20"><path d="M611.232 467.904a35.92 35.92 0 0 1-35.36 29.376 35.888 35.888 0 0 1-35.936-35.84 35.888 35.888 0 0 1 35.904-35.84 105.824 105.824 0 0 0-60.96-19.2c-58.608 0-106.048 47.312-106.048 105.6s47.44 105.6 106.032 105.6 106.032-47.312 106.032-105.6c0-15.744-3.456-30.672-9.664-44.096zM516.64 720c83.456 0 157.856-35.328 217.856-94.864 43.648-43.312 74.784-98.144 74.784-113.136 0-15.504-30.432-70.16-73.536-113.28C676.288 339.264 601.728 304 516.64 304c-84.576 0-158.944 35.968-218.88 96.64C255.136 443.808 224 499.168 224 512c0 12.32 31.856 67.872 75.008 111.2C359.488 683.984 433.696 720 516.64 720z m0 48C299.744 768 176 557.536 176 512s120.064-256 340.64-256c220.592 0 340.64 204.768 340.64 256s-123.744 256-340.64 256z m-1.76-102.4c-85.088 0-154.048-68.768-154.048-153.6s68.96-153.6 154.032-153.6c85.072 0 154.032 68.768 154.032 153.6s-68.96 153.6-154.032 153.6z" p-id="30015" data-spm-anchor-id="a313x.7781069.0.i34" fill="#999999"></path></svg>' + n + '</span><span title="评论数"><svg viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="30434" width="20" height="20"><path d="M519.312 392h16a16 16 0 0 1 16 16v168.352a16 16 0 0 1-16 16h-16a16 16 0 0 1-16-16V408a16 16 0 0 1 16-16zM408 436.528h16a16 16 0 0 1 16 16v79.296a16 16 0 0 1-16 16h-16a16 16 0 0 1-16-16v-79.296a16 16 0 0 1 16-16z m222.608 0h16a16 16 0 0 1 16 16v79.296a16 16 0 0 1-16 16h-16a16 16 0 0 1-16-16v-79.296a16 16 0 0 1 16-16zM418.512 719.28l0.032-0.08A311.04 311.04 0 0 0 520 736C675.2 736 800 624.32 800 488S675.2 240 520 240 240 351.68 240 488c0 70.592 33.52 136.56 91.568 183.392l-0.08 0.096 3.328 92.8 83.696-45.008z m-134-25.184C225.84 639.536 192 566.304 192 488 192 323.888 339.408 192 520 192S848 323.888 848 488 700.592 784 520 784c-32.992 0-65.328-4.4-96.224-12.944l-109.792 59.76a16 16 0 0 1-23.632-13.312l-5.84-123.408z" p-id="30435" fill="#999999"></path></svg>' + i + '</span><span title="点赞数"><svg viewBox="0 0 1040 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="29732" width="20" height="20"><path d="M520 288.192l-9.552-9.552-4-3.888c-73.28-69.088-188.432-67.488-259.808 3.888-72.848 72.848-72.848 190.96 0 263.808l262.048 262.048a16 16 0 0 0 22.624 0l262.048-262.048c72.848-72.848 72.848-190.96 0-263.808-72.848-72.848-190.96-72.848-263.808 0l-9.552 9.552z m-46.736 21.232l3.488 3.408 43.248 43.232 43.488-43.488a138.544 138.544 0 0 1 195.936 0l3.184 3.296a138.544 138.544 0 0 1-3.2 192.64L520 747.92 280.576 508.512a138.544 138.544 0 0 1 189.568-201.92l3.12 2.832z" p-id="29733" fill="#999999"></path></svg>' + diggitCount + "</span></div>")[0]);
            }
        }
        var n = 0, i = !0, o = $("#loadingProcess");
        //进度条
        !function t() {
            85 <= (n += 1) && (n = 85), o.css("width", n + "%"), i || 85 !== n ? requestAnimationFrame(t) : o.css("width", "100%").css("opacity", "0");
        }(), $(function () {
            i = !1, e(), $("#Header1_HeaderTitle").attr("href", "https://www.cnblogs.com/henrylin/"),
                a(), $("#cnblogs_post_body").on("click", function (t) {
                    "IMG" === t.target.tagName && $(t.target).toggleClass("enlarged");
                });
        });
        for (var j = 2; j <= 6; j++) {   //添加锚标签，防止书签跳转后内容被header遮挡
            var arr = document.querySelectorAll("#cnblogs_post_body>h" + j);
            var l;
            for (var i = 0, l = arr.length; i < l; i++) {
                var titleName = arr[i].id;
                arr[i].setAttribute('id', titleName + '_orginal');
                var anchor = document.createElement('a');
                anchor.setAttribute('name', titleName);
                anchor.setAttribute('class', 'anchor');
                document.getElementById('cnblogs_post_body').insertBefore(anchor, arr[i]);
            }
        }
    }();
</script>


<!--在文章中添加字数、预计阅读时间统计-->
<script type="text/javascript">
    $("#cnblogs_post_body").ready(function () {
        var cnt = 0;
        var minute1 = 0;
        var minute2 = 0;
        var data = $('#cnblogs_post_body').text();
        data = data.replace(/<[^>]+>/g, "");
        //先对回车换行符做特殊处理
        data = data.replace(/(\r\n+|\s+|　+)/g, "\uFFFF");
        //处理英文字符数字，连续字母、数字、英文符号视为一个单词
        data = data.replace(/[\x00-\xff]/g, "m");
        //合并字符m，连续字母、数字、英文符号视为一个单词
        data = data.replace(/m+/g, "*");
        //去掉回车换行符
        data = data.replace(/\uFFFF+/g, "");
        //返回字数
        cnt = data.length;
        minute1 = Math.round(cnt / 500); //300~500为每分钟阅读字数
        minute2 = Math.round(cnt / 300);
        var p = document.createElement("p");
        p.setAttribute("id", "counter");
        if (minute2 < 1) p.innerHTML = "本文共 " + cnt + " 字，阅读本文只需要不到 1 分钟";
        else p.innerHTML = "本文共 " + cnt + " 字，阅读本文大概需要 " + minute1 + " ~ " + minute2 + " 分钟";
        $("#cnblogs_post_body").before(p);
    });
</script>
<script>
    if (document.body.clientWidth <= 1200) document.getElementById('sidebar_toptags').style.display = 'none';
    else document.getElementById('sidebar_toptags').style.display = 'block';
    setInterval(function () {
        if (document.body.clientWidth <= 1200) document.getElementById('sidebar_toptags').style.display = 'none';
        else document.getElementById('sidebar_toptags').style.display = 'block';
    }, 1000);
</script>

<!--右下角小飞机-->
<script>
    function game() {
        var s = document.createElement('script');
        s.type = 'text/javascript';
        document.body.appendChild(s);
        s.src = 'https://blog-static.cnblogs.com/files/henrylin/asteroids.min.js';
        document.getElementById('game').style.display = 'none';
    }
</script>
<div id="game" onclick="game()">✈</div>

<!--页面预加载-->
<script src="//instant.page/3.0.0" type="module" defer integrity="sha384-OeDn4XE77tdHo8pGtE1apMPmAipjoxUQ++eeJa6EtJCfHlvijigWiJpD7VDPWXV1">
</script>

<!--实现部分内容不允许复制-->
<script>
    var arr = document.getElementsByClassName('no-select');
    var l = arr.length;
    for (var i = 0; i < l; i++) {
        arr[i].setAttribute('oncontextmenu', 'return false');
        arr[i].setAttribute('ondragstart', 'return false');
        arr[i].setAttribute('onselectstart', 'return false');
        arr[i].setAttribute('onselect', 'document.selection.empty()');
        arr[i].setAttribute('oncopy', 'document.selection.empty()');
        arr[i].setAttribute('onmouseup', 'document.selection.empty()');
        arr[i].setAttribute('onbeforecopy', 'return false');
    }
</script>

<!--防止目录内容悬停时magi的曲线连接符在IE和旧版Edge下导致页面高度无穷大的情况-->
<script>
    var ms_ie = false;
    var ua = window.navigator.userAgent;
    var old_ie = ua.indexOf('MSIE ');
    var new_ie = ua.indexOf('Trident/');
    var old_edge = ua.indexOf('Edge/')
    if ((old_ie > -1) || (new_ie > -1)) {
        document.documentElement.className = "ie";
        var arr = document.getElementsByClassName('no-select');
        var l = arr.length;
        for (var i = 0; i < l; i++) {
            arr[i].innerHTML = ""
        }
    }
    if (old_edge > -1) {
        document.documentElement.className = "edge";
    }
</script>